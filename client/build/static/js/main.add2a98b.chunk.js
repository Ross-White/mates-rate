(this["webpackJsonpmates-rate"]=this["webpackJsonpmates-rate"]||[]).push([[0],{194:function(e,t,n){},195:function(e,t,n){},200:function(e,t){},202:function(e,t){},216:function(e,t){},218:function(e,t){},246:function(e,t){},248:function(e,t){},249:function(e,t){},254:function(e,t){},256:function(e,t){},262:function(e,t){},264:function(e,t){},283:function(e,t){},295:function(e,t){},298:function(e,t){},320:function(e,t,n){"use strict";n.r(t);var a,c,r=n(2),s=n.n(r),i=n(179),o=n.n(i),l=(n(194),n(29)),u=(n(195),n(187)),j=n(331),d=n(332),b=n(330),m=n(186),p=n(52),h=n(13),f=n(53),O=n.n(f),g=n(73),x=n(51),v=n(55),w=n(107),k=n(333),y=Object(k.a)(a||(a=Object(w.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      profile {\n        _id\n        name\n      }\n    }\n  }\n"]))),N=Object(k.a)(c||(c=Object(w.a)(["\n  mutation addProfile($name: String!, $email: String!, $password: String!) {\n    addProfile(name: $name, email: $email, password: $password) {\n      token\n      profile {\n        _id\n        name\n      }\n    }\n  }\n"]))),S=n(180),$=n(181),C=n(108),I="id_token",T=new(function(){function e(){Object(S.a)(this,e)}return Object($.a)(e,[{key:"getProfile",value:function(){return Object(C.decode)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!(!e||this.isTokenExpired(e))}},{key:"isTokenExpired",value:function(e){return Object(C.decode)(e).exp<Date.now()/1e3&&(localStorage.removeItem(I),!0)}},{key:"getToken",value:function(){return localStorage.getItem(I)}},{key:"login",value:function(e){localStorage.removeItem(I),window.location.reload()}}]),e}()),P=n(334),Y=n(5);function D(){var e=Object(r.useState)({email:"",password:""}),t=Object(v.a)(e,2),n=t[0],a=t[1],c=Object(P.a)(y),s=Object(v.a)(c,2),i=s[0],o=s[1],u=o.error,j=o.data,d=function(e){var t=e.target,c=t.name,r=t.value;a(Object(l.a)(Object(l.a)({},n),{},Object(x.a)({},c,r)))},b=function(){var e=Object(g.a)(O.a.mark((function e(t){var c,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(n),e.prev=2,e.next=5,i({variables:Object(l.a)({},n)});case 5:c=e.sent,r=c.data,T.login(r.login.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:a({email:"",password:""});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(Y.jsx)("main",{className:"flex justify-center",children:Object(Y.jsx)("div",{className:"",children:Object(Y.jsxs)("div",{className:"",children:[Object(Y.jsx)("h4",{className:"p-2",children:"Login"}),Object(Y.jsxs)("div",{className:"card-body",children:[j?Object(Y.jsxs)("p",{children:["Success! You may now head"," ",Object(Y.jsx)(p.b,{to:"/",children:"back to the homepage."})]}):Object(Y.jsxs)("form",{onSubmit:b,children:[Object(Y.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",value:n.email,onChange:d}),Object(Y.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:n.password,onChange:d}),Object(Y.jsx)("button",{className:"btn btn-block btn-info",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),u&&Object(Y.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:u.message})]})]})})})}var F=function(){var e=Object(r.useState)({name:"",email:"",password:""}),t=Object(v.a)(e,2),n=t[0],a=t[1],c=Object(P.a)(N),s=Object(v.a)(c,2),i=s[0],o=s[1],u=o.error,j=o.data,d=function(e){var t=e.target,c=t.name,r=t.value;a(Object(l.a)(Object(l.a)({},n),{},Object(x.a)({},c,r)))},b=function(){var e=Object(g.a)(O.a.mark((function e(t){var a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(n),e.prev=2,e.next=5,i({variables:Object(l.a)({},n)});case 5:a=e.sent,c=a.data,T.login(c.addProfile.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(Y.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(Y.jsx)("div",{className:"col-12 col-lg-10",children:Object(Y.jsxs)("div",{className:"card",children:[Object(Y.jsx)("h4",{className:"card-header bg-dark text-light p-2",children:"Sign Up"}),Object(Y.jsxs)("div",{className:"card-body",children:[j?Object(Y.jsxs)("p",{children:["Success! You may now head"," ",Object(Y.jsx)(p.b,{to:"/",children:"back to the homepage."})]}):Object(Y.jsxs)("form",{onSubmit:b,children:[Object(Y.jsx)("input",{className:"form-input",placeholder:"Your username",name:"name",type:"text",value:n.name,onChange:d}),Object(Y.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",value:n.email,onChange:d}),Object(Y.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:n.password,onChange:d}),Object(Y.jsx)("button",{className:"btn btn-block btn-info",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),u&&Object(Y.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:u.message})]})]})})})},_=Object(u.a)({uri:"/graphql"}),B=Object(m.a)((function(e,t){var n=t.headers,a=localStorage.getItem("id_token");return{headers:Object(l.a)(Object(l.a)({},n),{},{authorization:a?"Bearer ".concat(a):""})}})),E=new j.a({link:B.concat(_),cache:new d.a});var L=function(){return Object(Y.jsx)(b.a,{client:E,children:Object(Y.jsx)(p.a,{children:Object(Y.jsx)("div",{className:"flex-column justify-flex-start min-h-full",children:Object(Y.jsxs)("div",{className:"container",children:[Object(Y.jsx)(h.a,{exact:!0,path:"/login",children:Object(Y.jsx)(D,{})}),Object(Y.jsx)(h.a,{exact:!0,path:"/signup",children:Object(Y.jsx)(F,{})})]})})})})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,336)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};o.a.render(Object(Y.jsx)(s.a.StrictMode,{children:Object(Y.jsx)(L,{})}),document.getElementById("root")),J()}},[[320,1,2]]]);
//# sourceMappingURL=main.add2a98b.chunk.js.map